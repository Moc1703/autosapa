<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AutoSapa</title>
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-wrapper">
        <!-- Desktop Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">üì°</div>
                    <span>AutoSapa</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="sidebar-item active" onclick="switchTab('dashboard')" data-tab="dashboard">
                    <span class="sidebar-icon">üè†</span>
                    <span class="sidebar-text">Dashboard</span>
                </button>
                <button class="sidebar-item" onclick="switchTab('broadcast')" data-tab="broadcast">
                    <span class="sidebar-icon">üì¢</span>
                    <span class="sidebar-text">Broadcast</span>
                </button>
                <button class="sidebar-item" onclick="switchTab('groups')" data-tab="groups">
                    <span class="sidebar-icon">üë•</span>
                    <span class="sidebar-text">Groups</span>
                </button>
                <button class="sidebar-item" onclick="switchTab('auto')" data-tab="auto">
                    <span class="sidebar-icon">ü§ñ</span>
                    <span class="sidebar-text">Auto Reply</span>
                </button>
                <button class="sidebar-item" onclick="switchTab('schedule')" data-tab="schedule">
                    <span class="sidebar-icon">üìÖ</span>
                    <span class="sidebar-text">Schedule</span>
                </button>
                <button class="sidebar-item" onclick="switchTab('history')" data-tab="history">
                    <span class="sidebar-icon">üìä</span>
                    <span class="sidebar-text">Statistics</span>
                </button>
                <button class="sidebar-item" onclick="switchTab('settings')" data-tab="settings">
                    <span class="sidebar-icon">‚öôÔ∏è</span>
                    <span class="sidebar-text">Settings</span>
                </button>
                <button class="sidebar-item" onclick="switchTab('changelog')" data-tab="changelog">
                    <span class="sidebar-icon">üéâ</span>
                    <span class="sidebar-text">Changelog</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="status-badge disconnected" id="statusBadgeDesktop">
                    <span class="status-dot"></span>
                    <span id="statusTextDesktop">Connecting...</span>
                </div>
            </div>
        </aside>

        <!-- Main Container -->
        <div class="app-container">
            <!-- Mobile Header -->
            <header class="app-header">
                <div class="header-content">
                    <button class="hamburger" id="hamburgerBtn" onclick="toggleMobileMenu()">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    <div class="logo">
                        <div class="logo-icon">üì°</div>
                        <span>AutoSapa</span>
                    </div>
                    <div class="status-badge disconnected" id="statusBadge">
                        <span class="status-dot"></span>
                        <span id="statusText">Connecting...</span>
                    </div>
                </div>
            </header>

            <!-- Mobile Slide Menu -->
            <div class="mobile-menu-overlay" id="mobileMenuOverlay" onclick="toggleMobileMenu()"></div>
            <nav class="mobile-menu" id="mobileMenu">
                <div class="mobile-menu-header">
                    <div class="logo">
                        <div class="logo-icon">üì°</div>
                        <span>AutoSapa</span>
                    </div>
                    <button class="mobile-menu-close" onclick="toggleMobileMenu()">√ó</button>
                </div>
                <div class="mobile-menu-items">
                    <button class="mobile-menu-item active" onclick="switchTab('dashboard'); toggleMobileMenu()"
                        data-tab="dashboard">
                        <span class="mobile-menu-icon">üè†</span>
                        <span>Dashboard</span>
                    </button>
                    <button class="mobile-menu-item" onclick="switchTab('broadcast'); toggleMobileMenu()"
                        data-tab="broadcast">
                        <span class="mobile-menu-icon">üì¢</span>
                        <span>Broadcast</span>
                    </button>
                    <button class="mobile-menu-item" onclick="switchTab('groups'); toggleMobileMenu()"
                        data-tab="groups">
                        <span class="mobile-menu-icon">üë•</span>
                        <span>Groups</span>
                    </button>
                    <button class="mobile-menu-item" onclick="switchTab('auto'); toggleMobileMenu()" data-tab="auto">
                        <span class="mobile-menu-icon">ü§ñ</span>
                        <span>Auto Reply</span>
                    </button>
                    <button class="mobile-menu-item" onclick="switchTab('schedule'); toggleMobileMenu()"
                        data-tab="schedule">
                        <span class="mobile-menu-icon">üìÖ</span>
                        <span>Schedule</span>
                    </button>
                    <button class="mobile-menu-item" onclick="switchTab('history'); toggleMobileMenu()"
                        data-tab="history">
                        <span class="mobile-menu-icon">üìä</span>
                        <span>Statistics</span>
                    </button>
                    <button class="mobile-menu-item" onclick="switchTab('settings'); toggleMobileMenu()"
                        data-tab="settings">
                        <span class="mobile-menu-icon">‚öôÔ∏è</span>
                        <span>Settings</span>
                    </button>
                    <button class="mobile-menu-item" onclick="switchTab('changelog'); toggleMobileMenu()"
                        data-tab="changelog">
                        <span class="mobile-menu-icon">üéâ</span>
                        <span>Changelog</span>
                    </button>
                </div>
                <div class="mobile-menu-footer">
                    <div class="status-badge disconnected" id="statusBadgeMobile">
                        <span class="status-dot"></span>
                        <span id="statusTextMobile">Connecting...</span>
                    </div>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="app-main">
                <!-- Tab: Dashboard (NEW) -->
                <div class="tab-panel active" id="tab-dashboard">
                    <!-- Welcome Header -->
                    <div class="dashboard-header">
                        <div class="dashboard-greeting">
                            <h1 class="dashboard-title">Dashboard</h1>
                            <p class="dashboard-subtitle" id="currentDate"></p>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="dashboard-stats">
                        <div class="dash-stat-card">
                            <div class="dash-stat-icon">üë•</div>
                            <div class="dash-stat-info">
                                <span class="dash-stat-value" id="dashTotalGroups">0</span>
                                <span class="dash-stat-label">Groups</span>
                            </div>
                        </div>
                        <div class="dash-stat-card">
                            <div class="dash-stat-icon">üì®</div>
                            <div class="dash-stat-info">
                                <span class="dash-stat-value" id="dashTotalSent">0</span>
                                <span class="dash-stat-label">Sent Today</span>
                            </div>
                        </div>
                        <div class="dash-stat-card">
                            <div class="dash-stat-icon">üìÖ</div>
                            <div class="dash-stat-info">
                                <span class="dash-stat-value" id="dashScheduled">0</span>
                                <span class="dash-stat-label">Scheduled</span>
                            </div>
                        </div>
                        <div class="dash-stat-card">
                            <div class="dash-stat-icon">ü§ñ</div>
                            <div class="dash-stat-info">
                                <span class="dash-stat-value" id="dashAutoReplies">0</span>
                                <span class="dash-stat-label">Auto Replies</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="dashboard-section">
                        <h2 class="dashboard-section-title">Quick Actions</h2>
                        <div class="quick-actions">
                            <button class="quick-action-btn" onclick="switchTab('broadcast')">
                                <span class="quick-action-icon">üì¢</span>
                                <span class="quick-action-text">Broadcast</span>
                            </button>
                            <button class="quick-action-btn" onclick="switchTab('groups'); showAddGroup()">
                                <span class="quick-action-icon">üë•</span>
                                <span class="quick-action-text">Add Group</span>
                            </button>
                            <button class="quick-action-btn" onclick="switchTab('schedule'); showAddSchedule()">
                                <span class="quick-action-icon">üìÖ</span>
                                <span class="quick-action-text">Schedule</span>
                            </button>
                            <button class="quick-action-btn" onclick="switchTab('auto'); showAddReply()">
                                <span class="quick-action-icon">ü§ñ</span>
                                <span class="quick-action-text">Auto Reply</span>
                            </button>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="dashboard-section">
                        <div class="dashboard-section-header">
                            <h2 class="dashboard-section-title">Recent Activity</h2>
                            <button class="btn btn-sm btn-secondary" onclick="switchTab('history')">View All</button>
                        </div>
                        <div class="activity-list" id="dashboardHistoryList">
                            <div class="empty-state">
                                <p class="text-muted">No recent activity</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Broadcast (Renamed from Home) -->
                <div class="tab-panel" id="tab-broadcast">
                    <div class="page-header">
                        <h1 class="page-title">üì¢ Broadcast Message</h1>
                    </div>

                    <!-- Quick Actions Grid (Existing) -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3 class="card-title">‚ö° Saved Quick Actions</h3>
                            <button class="btn btn-sm btn-primary" onclick="showAddQuickAction()">+ Add</button>
                        </div>
                        <div class="quick-actions-grid" id="quickActionsGrid">
                            <p class="text-muted text-center">No quick actions yet</p>
                        </div>
                    </div>

                    <!-- Desktop: Two Column Layout -->
                    <div class="desktop-grid">
                        <!-- Left Column: Message & Image -->
                        <div class="desktop-col">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Message</h3>
                                </div>
                                <div class="message-tools">
                                    <button class="btn btn-sm btn-secondary" onclick="loadDraft()">üìÇ Load</button>
                                    <button class="btn btn-sm btn-secondary" onclick="saveDraft()">üíæ Save</button>
                                    <button class="btn btn-sm btn-secondary" onclick="showTemplateSelect()">üìù
                                        Templates</button>
                                </div>
                                <div class="form-group mb-2">
                                    <textarea class="form-input" id="quickMessage" rows="5"
                                        placeholder="Type your message here..."></textarea>
                                </div>
                                <!-- Message Preview -->
                                <div id="messagePreview" class="hidden mb-2"></div>
                                <button class="btn btn-sm btn-secondary mb-2" onclick="previewMessage()">üëÅÔ∏è
                                    Preview</button>
                                <div class="upload-area" id="uploadArea"
                                    onclick="document.getElementById('imageInput').click()">
                                    <input type="file" id="imageInput" accept="image/*" style="display:none"
                                        onchange="previewImage(event)">
                                    <span id="uploadText">üì∑ Click to add image (optional)</span>
                                </div>
                                <img id="imagePreview" class="image-preview hidden">
                                <button id="removeImageBtn" class="btn btn-sm btn-danger mt-2 hidden"
                                    onclick="removeImage()">üóëÔ∏è Remove Image</button>
                            </div>

                            <!-- Media Library -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">üñºÔ∏è Media Library</h3>
                                    <button class="btn btn-sm btn-secondary" onclick="loadMedia()">üîÑ Refresh</button>
                                </div>
                                <div class="media-grid" id="mediaGrid">
                                    <p class="text-muted text-center">No images uploaded</p>
                                </div>
                            </div>

                            <!-- Quick Stats - Desktop -->
                            <div class="stats-row desktop-only">
                                <div class="stat-mini">
                                    <span class="stat-mini-value" id="totalGroupsDesktop">0</span>
                                    <span class="stat-mini-label">Groups</span>
                                </div>
                                <div class="stat-mini">
                                    <span class="stat-mini-value" id="totalSentDesktop">0</span>
                                    <span class="stat-mini-label">Sent Today</span>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column: Group Selection -->
                        <div class="desktop-col">
                            <!-- Target Selection Tabs -->
                            <div class="card">
                                <div class="card-header pb-0" style="border-bottom:none; display:block">
                                    <div class="flex justify-between align-center mb-2">
                                        <h3 class="card-title">Target Recipients</h3>
                                        <span class="selected-count" id="selectedCount">0 selected</span>
                                    </div>
                                    <div class="tabs">
                                        <button class="tab-btn active" onclick="switchTargetTab('groups')"
                                            id="tabBtn-groups">üë• Groups</button>
                                        <button class="tab-btn" onclick="switchTargetTab('manual')"
                                            id="tabBtn-manual">üìù Manual Input</button>
                                    </div>
                                </div>

                                <!-- Group Selection Panel -->
                                <div id="targetPanel-groups" class="p-3">
                                    <div class="select-all-bar">
                                        <label class="checkbox-row mb-0">
                                            <input type="checkbox" id="selectAllGroups" onchange="toggleSelectAll()">
                                            <span>Select All</span>
                                        </label>
                                    </div>
                                    <div class="group-select-list" id="groupSelectList">
                                        <div class="empty-state">
                                            <p class="text-muted">No groups yet. Add groups first.</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Manual Input Panel -->
                                <div id="targetPanel-manual" class="hidden p-3 pt-0">
                                    <div class="form-group mb-0">
                                        <textarea class="form-input" id="manualNumbers"
                                            placeholder="Paste WhatsApp numbers here... e.g.:&#10;08123456789&#10;628123456789&#10;+62 812-3456-789"
                                            style="min-height:200px; font-family:monospace"></textarea>
                                        <p class="form-hint">
                                            Auto-formatted to Indonesia (+62). Separate with Enter or Comma.
                                            <span id="manualCount" class="badge badge-info float-right">0 numbers</span>
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Anti-Ban Settings -->
                            <div class="card mb-4">
                                <div class="card-header" onclick="toggleAntiBanSettings()" style="cursor: pointer;">
                                    <h3 class="card-title">üõ°Ô∏è Anti-Ban Settings</h3>
                                    <span id="antiBanIndicator" class="badge badge-active">Safe Mode ON</span>
                                </div>

                                <div id="antiBanSettings" class="hidden"
                                    style="margin-top: 16px; border-top: 1px solid #2a3942; padding-top: 16px;">
                                    <!-- Safe Mode Toggle -->
                                    <div class="toggle-row mb-4">
                                        <div>
                                            <span class="toggle-label">
                                                üîí Safe Mode
                                                <div class="tooltip">‚ùì
                                                    <span class="tooltip-text">Recommended. Automatically uses random
                                                        delay (5-15s) and typing simulation to mimic human
                                                        behavior.</span>
                                                </div>
                                            </span>
                                            <p class="form-hint mb-0">Recommended to prevent number banning.</p>
                                        </div>
                                        <div class="toggle active" id="safeModeToggle" onclick="toggleSafeMode()"></div>
                                    </div>

                                    <!-- Custom Settings (Hidden when Safe Mode is ON) -->
                                    <div id="customAntiBanSettings" class="hidden">
                                        <div class="form-group">
                                            <label class="form-label">
                                                Random Delay (seconds)
                                                <div class="tooltip">‚ùì
                                                    <span class="tooltip-text">Random pause between each message
                                                        sent.</span>
                                                </div>
                                            </label>
                                            <div class="flex gap-2">
                                                <input type="number" class="form-input" id="delayMin" placeholder="Min"
                                                    value="5">
                                                <span style="align-self:center">-</span>
                                                <input type="number" class="form-input" id="delayMax" placeholder="Max"
                                                    value="15">
                                            </div>
                                            <p class="form-hint">Randomizer will pick a delay between these values.</p>
                                        </div>

                                        <div class="toggle-row mb-2">
                                            <div>
                                                <span class="toggle-label">
                                                    üò¥ Sleep Mode
                                                    <div class="tooltip">‚ùì
                                                        <span class="tooltip-text">Takes a long break after sending a
                                                            batch of messages to cool down account activity.</span>
                                                    </div>
                                                </span>
                                                <p class="form-hint mb-0">Pause after sending X messages</p>
                                            </div>
                                            <div class="toggle" id="sleepModeToggle" onclick="toggleSleepMode()"></div>
                                        </div>

                                        <div id="sleepSettings" class="hidden">
                                            <div class="form-group">
                                                <label class="form-label">Sleep rules</label>
                                                <div class="flex gap-2 align-center">
                                                    <span>After</span>
                                                    <input type="number" class="form-input" id="sleepAfter" value="50"
                                                        style="width: 80px">
                                                    <span>msgs, sleep for</span>
                                                    <input type="number" class="form-input" id="sleepDuration" value="5"
                                                        style="width: 80px">
                                                    <span>mins</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button class="btn btn-primary btn-block btn-lg" onclick="sendBroadcast()" id="sendBtn">
                                üì§ Send Broadcast
                            </button>
                            <p class="keyboard-hint text-center">Press <kbd>Ctrl</kbd>+<kbd>Enter</kbd> to send,
                                <kbd>Ctrl</kbd>+<kbd>S</kbd> to save draft
                            </p>

                            <!-- Result -->
                            <div class="hidden mt-4" id="resultSection">
                                <div class="result-card success" id="resultCard">
                                    <div class="result-icon">‚úÖ</div>
                                    <div class="result-title" id="resultTitle">Broadcast Sent!</div>
                                    <div class="result-stats">
                                        <div class="result-stat">
                                            <div class="result-stat-value text-success" id="resultSuccess">0</div>
                                            <div class="result-stat-label">Success</div>
                                        </div>
                                        <div class="result-stat">
                                            <div class="result-stat-value text-danger" id="resultFailed">0</div>
                                            <div class="result-stat-label">Failed</div>
                                        </div>
                                    </div>
                                    <div id="broadcastProgress" class="hidden text-center mt-2">
                                        <p class="text-muted" id="progressText">Sending...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mobile: Stats -->
                    <div class="stats-grid mobile-only">
                        <div class="stat-card">
                            <div class="stat-value" id="totalGroups">0</div>
                            <div class="stat-label">Groups</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalSent">0</div>
                            <div class="stat-label">Sent Today</div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Groups -->
                <div class="tab-panel" id="tab-groups">
                    <div class="page-header">
                        <h1 class="page-title">üë• Groups & Contacts</h1>
                    </div>

                    <div class="desktop-grid">
                        <div class="desktop-col">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">My Groups</h3>
                                    <div class="flex gap-2">
                                        <button class="btn btn-sm btn-secondary" onclick="toggleBulkMode()">‚òëÔ∏è
                                            Bulk</button>
                                        <button class="btn btn-sm btn-primary" onclick="showAddGroup()">+ Add</button>
                                    </div>
                                </div>

                                <!-- Bulk Actions Bar -->
                                <div id="bulkActions" class="bulk-actions-bar hidden">
                                    <span id="bulkCount">0 selected</span>
                                    <button class="btn btn-sm btn-danger" onclick="bulkDeleteGroups()">üóëÔ∏è Delete
                                        Selected</button>
                                </div>

                                <!-- Category Filter Chips -->
                                <div class="category-chips" id="categoryChips">
                                    <button class="category-chip active" onclick="filterByCategory('all')">üìã
                                        All</button>
                                </div>

                                <div class="search-box mb-3">
                                    <input type="text" class="form-input" id="searchGroups"
                                        placeholder="Search groups..." oninput="filterGroups()">
                                </div>
                                <div class="action-buttons-row">
                                    <button class="btn btn-secondary" onclick="discoverGroups()">üîç Discover</button>
                                    <button class="btn btn-secondary" id="syncBtn" onclick="syncGroups()">üîÑ
                                        Sync</button>
                                    <button class="btn btn-secondary" onclick="exportGroups()"
                                        title="Export">üì§</button>
                                    <button class="btn btn-secondary"
                                        onclick="document.getElementById('importGroupsFile').click()"
                                        title="Import">üì•</button>
                                    <input type="file" id="importGroupsFile" accept=".json" style="display:none"
                                        onchange="importGroups(event)">
                                </div>
                                <div class="list" id="groupsList">
                                    <div class="empty-state" id="groupsEmptyState">
                                        <div class="empty-icon">üë•</div>
                                        <div class="empty-title">No groups yet</div>
                                        <p class="empty-text">Choose how to add your WhatsApp groups:</p>
                                        <div
                                            style="display:flex; flex-direction:column; gap:8px; margin-top:16px; width:100%; max-width:280px;">
                                            <button class="btn btn-primary" onclick="syncGroups()" id="emptySyncBtn">
                                                üîÑ Sync All Groups
                                                <small
                                                    style="display:block; font-weight:normal; opacity:0.8; font-size:11px;">Auto-import
                                                    from WhatsApp (recommended)</small>
                                            </button>
                                            <button class="btn btn-secondary" onclick="discoverGroups()">
                                                üîç Discover Groups
                                                <small
                                                    style="display:block; font-weight:normal; opacity:0.8; font-size:11px;">Browse
                                                    & pick specific groups</small>
                                            </button>
                                            <button class="btn btn-secondary" onclick="showAddGroup()">
                                                ‚úèÔ∏è Add Manually
                                                <small
                                                    style="display:block; font-weight:normal; opacity:0.8; font-size:11px;">Enter
                                                    group ID yourself</small>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="desktop-col">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">üìá Contacts</h3>
                                    <button class="btn btn-sm btn-primary" onclick="showAddContact()">+ Add</button>
                                </div>
                                <div class="search-box mb-3">
                                    <input type="text" class="form-input" id="searchContacts"
                                        placeholder="Search contacts..." oninput="filterContacts()">
                                </div>
                                <div class="list" id="contactsList">
                                    <div class="empty-state">
                                        <p class="text-muted">Save contacts for quick access</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Auto Reply -->
                <div class="tab-panel" id="tab-auto">
                    <div class="page-header">
                        <h1 class="page-title">ü§ñ Automation</h1>
                    </div>

                    <!-- Auto Reply Stats -->
                    <div class="stats-row mb-4" id="autoReplyStats">
                        <div class="stat-mini">
                            <span class="stat-mini-value">0</span>
                            <span class="stat-mini-label">Total Triggers</span>
                        </div>
                        <div class="stat-mini">
                            <span class="stat-mini-value">0</span>
                            <span class="stat-mini-label">Today</span>
                        </div>
                    </div>

                    <div class="desktop-grid">
                        <div class="desktop-col">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Auto Reply</h3>
                                    <button class="btn btn-sm btn-primary" onclick="showAddReply()">+ Add</button>
                                </div>
                                <div class="list" id="autoReplyList">
                                    <div class="empty-state">
                                        <div class="empty-icon">ü§ñ</div>
                                        <div class="empty-title">No auto replies</div>
                                        <p class="empty-text">Create automatic responses to keywords</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="desktop-col">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">‚ö° Commands</h3>
                                    <button class="btn btn-sm btn-primary" onclick="showAddCommand()">+ Add</button>
                                </div>
                                <div class="search-box mb-3">
                                    <input type="text" class="form-input" id="searchCommands"
                                        placeholder="Search commands..." oninput="filterCommands()">
                                </div>
                                <div class="list" id="commandsList">
                                    <div class="empty-state">
                                        <p class="text-muted">Create !help, !menu, etc.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Schedule -->
                <div class="tab-panel" id="tab-schedule">
                    <!-- Header -->
                    <div class="schedule-header">
                        <div>
                            <h1 class="page-title">Schedule</h1>
                            <p class="page-subtitle">Manage scheduled broadcasts and templates</p>
                        </div>
                        <button class="btn btn-primary" onclick="showAddSchedule()">+ New Schedule</button>
                    </div>

                    <!-- Stats Row -->
                    <div class="schedule-stats">
                        <div class="schedule-stat-card">
                            <span class="schedule-stat-value" id="schedPending">0</span>
                            <span class="schedule-stat-label">Pending</span>
                        </div>
                        <div class="schedule-stat-card">
                            <span class="schedule-stat-value" id="schedSentToday">0</span>
                            <span class="schedule-stat-label">Sent Today</span>
                        </div>
                        <div class="schedule-stat-card">
                            <span class="schedule-stat-value" id="schedTotal">0</span>
                            <span class="schedule-stat-label">Total</span>
                        </div>
                    </div>

                    <!-- Tabs: Schedules / Templates -->
                    <div class="schedule-tabs">
                        <button class="schedule-tab active" onclick="switchScheduleTab('schedules')" id="tabSchedules">
                            Schedules
                        </button>
                        <button class="schedule-tab" onclick="switchScheduleTab('templates')" id="tabTemplates">
                            Templates
                        </button>
                    </div>

                    <!-- Schedules Panel -->
                    <div class="schedule-panel active" id="panelSchedules">
                        <div class="schedule-toolbar">
                            <div class="search-box" style="flex:1; margin-bottom:0;">
                                <input type="text" class="form-input" id="searchSchedules"
                                    placeholder="Search schedules..." oninput="filterSchedules()">
                            </div>
                            <div class="schedule-filter">
                                <button class="filter-btn active" onclick="filterScheduleStatus('all')">All</button>
                                <button class="filter-btn" onclick="filterScheduleStatus('pending')">Pending</button>
                                <button class="filter-btn" onclick="filterScheduleStatus('sent')">Sent</button>
                            </div>
                        </div>

                        <div class="schedule-list" id="scheduleList">
                            <div class="empty-state">
                                <div class="empty-icon">üìÖ</div>
                                <div class="empty-title">No schedules yet</div>
                                <p class="empty-text">Create your first scheduled broadcast</p>
                                <button class="btn btn-primary mt-4" onclick="showAddSchedule()">+ Create
                                    Schedule</button>
                            </div>
                        </div>
                    </div>

                    <!-- Templates Panel -->
                    <div class="schedule-panel" id="panelTemplates">
                        <div class="schedule-toolbar">
                            <div class="search-box" style="flex:1; margin-bottom:0;">
                                <input type="text" class="form-input" id="searchTemplates"
                                    placeholder="Search templates..." oninput="filterTemplates()">
                            </div>
                            <button class="btn btn-primary" onclick="showAddTemplate()">+ New Template</button>
                        </div>

                        <div class="template-grid" id="templatesList">
                            <div class="empty-state">
                                <div class="empty-icon">üìù</div>
                                <div class="empty-title">No templates yet</div>
                                <p class="empty-text">Save message templates for quick reuse</p>
                                <button class="btn btn-primary mt-4" onclick="showAddTemplate()">+ Create
                                    Template</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: History -->
                <div class="tab-panel" id="tab-history">
                    <div class="page-header">
                        <h1 class="page-title">üìä Statistics</h1>
                    </div>

                    <div class="stats-grid stats-grid-4">
                        <div class="stat-card">
                            <div class="stat-value" id="statTotal">0</div>
                            <div class="stat-label">Total Sent</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statSuccess">0%</div>
                            <div class="stat-label">Success Rate</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statGroups">0</div>
                            <div class="stat-label">Groups</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statReplies">0</div>
                            <div class="stat-label">Auto Replies</div>
                        </div>
                    </div>

                    <!-- Analytics Chart -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3 class="card-title">üìà Weekly Activity</h3>
                            <button class="btn btn-sm btn-secondary" onclick="loadAnalytics()">üîÑ Refresh</button>
                        </div>
                        <div class="analytics-chart" id="analyticsChart">
                            <p class="text-muted text-center">Loading chart...</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Recent Activity</h3>
                            <div class="flex gap-2">
                                <button class="btn btn-sm btn-secondary" onclick="exportCSV()">üì• Export CSV</button>
                                <button class="btn btn-sm btn-danger" onclick="clearHistory()">üóëÔ∏è Clear</button>
                            </div>
                        </div>
                        <div class="list" id="historyList">
                            <div class="empty-state">
                                <p class="text-muted">No broadcast history yet</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Settings -->
                <div class="tab-panel" id="tab-settings">
                    <div class="page-header">
                        <h1 class="page-title">‚öôÔ∏è Settings</h1>
                    </div>

                    <div class="desktop-grid">
                        <div class="desktop-col">
                            <div class="card">
                                <h3 class="card-title mb-4">General</h3>

                                <div class="toggle-row">
                                    <div>
                                        <span class="toggle-label">Anti-Ban Queue</span>
                                        <p class="form-hint mb-0">Add delay between messages</p>
                                    </div>
                                    <div class="toggle" id="queueToggle" onclick="toggleSetting('queue')"></div>
                                </div>

                                <div class="toggle-row">
                                    <div>
                                        <span class="toggle-label">Typing Indicator</span>
                                        <p class="form-hint mb-0">Show typing... before sending</p>
                                    </div>
                                    <div class="toggle" id="typingToggle" onclick="toggleSetting('typing')"></div>
                                </div>


                                <div class="toggle-row">
                                    <div>
                                        <span class="toggle-label">Login Protection</span>
                                        <p class="form-hint mb-0">Require password to access</p>
                                    </div>
                                    <div class="toggle" id="authToggle" onclick="toggleSetting('auth')"></div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">üö´ Blacklist</h3>
                                    <button class="btn btn-sm btn-secondary" onclick="showBlacklist()">Manage</button>
                                </div>
                                <div class="form-group mb-2">
                                    <input type="text" class="form-input" id="blacklistInput"
                                        placeholder="Enter number to block (62812xxx)">
                                </div>
                                <button class="btn btn-danger btn-block" onclick="addBlacklist()">üö´ Block
                                    Number</button>
                            </div>
                        </div>

                        <div class="desktop-col">
                            <div class="card">
                                <h3 class="card-title mb-4">üíæ Backup & Data</h3>
                                <p class="text-muted mb-4">Download or restore all your data</p>
                                <div class="btn-row">
                                    <button class="btn btn-secondary" onclick="downloadBackup()">üì• Backup</button>
                                    <button class="btn btn-secondary"
                                        onclick="document.getElementById('restoreFile').click()">üì§ Restore</button>
                                    <input type="file" id="restoreFile" accept=".json" style="display:none"
                                        onchange="restoreBackup(event)">
                                </div>
                            </div>

                            <div class="card">
                                <h3 class="card-title mb-4">üìã Message Logs</h3>
                                <button class="btn btn-secondary btn-block" onclick="viewLogs()">View Incoming
                                    Messages</button>
                            </div>

                            <div class="card">
                                <h3 class="card-title mb-4">üì± WhatsApp</h3>
                                <p class="text-muted mb-4">Disconnect dan link ke akun WhatsApp lain</p>
                                <button class="btn btn-warning btn-block mb-2" onclick="switchWhatsApp()">üîÑ Ganti Akun
                                    WhatsApp</button>
                            </div>

                            <div class="card">
                                <h3 class="card-title mb-4">üö™ Session</h3>
                                <button class="btn btn-danger btn-block" onclick="logout()">Logout</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Changelog -->
                <div class="tab-panel" id="tab-changelog">
                    <div class="page-header">
                        <h1 class="page-title">üéâ Changelog</h1>
                        <p class="text-muted">What's new in AutoSapa</p>
                    </div>

                    <div class="changelog-container">
                        <!-- Version 1.5.0 - Latest -->
                        <div class="changelog-version">
                            <div class="changelog-header">
                                <div class="changelog-version-badge">v1.5.0</div>
                                <span class="changelog-date">5 Dec 2024</span>
                                <span class="badge badge-active">Latest</span>
                            </div>
                            <div class="changelog-content">
                                <div class="changelog-section">
                                    <div class="changelog-section-title">üîí Security Updates</div>
                                    <ul class="changelog-list">
                                        <li><strong>Admin Rate Limiting:</strong> Proteksi brute-force dengan limit 5
                                            attempt/15 menit</li>
                                        <li><strong>Security Headers:</strong> X-Frame-Options, HSTS, XSS-Protection
                                        </li>
                                        <li><strong>MIME Validation:</strong> Upload hanya untuk file yang diizinkan
                                        </li>
                                        <li><strong>Path Traversal Protection:</strong> Validasi user ID di file uploads
                                        </li>
                                    </ul>
                                </div>
                                <div class="changelog-section">
                                    <div class="changelog-section-title">üì± Mobile UX</div>
                                    <ul class="changelog-list">
                                        <li><strong>Bottom Navigation:</strong> Quick access Home, Broadcast, Groups,
                                            Auto di mobile</li>
                                        <li><strong>Compact Header:</strong> Lebih banyak ruang konten di mobile</li>
                                        <li><strong>Smooth Animations:</strong> Transisi halus saat pindah tab</li>
                                        <li><strong>Button Ripple Effects:</strong> Feedback visual premium</li>
                                    </ul>
                                </div>
                                <div class="changelog-section">
                                    <div class="changelog-section-title">üëÆ Admin Panel</div>
                                    <ul class="changelog-list">
                                        <li><strong>Activity Logs:</strong> Monitor semua aktivitas user</li>
                                        <li><strong>Suspicious Detection:</strong> Deteksi otomatis spam & kata
                                            terlarang</li>
                                        <li><strong>User Moderation:</strong> Suspend/unsuspend user langsung</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Version 1.4.0 -->
                        <div class="changelog-version">
                            <div class="changelog-header">
                                <div class="changelog-version-badge">v1.4.0</div>
                                <span class="changelog-date">Nov 2024</span>
                            </div>
                            <div class="changelog-content">
                                <div class="changelog-section">
                                    <div class="changelog-section-title">‚ú® New Features</div>
                                    <ul class="changelog-list">
                                        <li><strong>Safe Broadcast:</strong> Anti-Ban dengan Random Delay & Smart Typing
                                        </li>
                                        <li><strong>Spintax Support:</strong> Variasi pesan otomatis {Halo|Hai}</li>
                                        <li><strong>Sleep Mode:</strong> Bot istirahat setelah X pesan terkirim</li>
                                        <li><strong>Manual Input:</strong> Kirim ke list nomor tanpa save kontak</li>
                                    </ul>
                                </div>
                                <div class="changelog-section">
                                    <div class="changelog-section-title">üêõ Bug Fixes</div>
                                    <ul class="changelog-list">
                                        <li>Fixed Puppeteer SingletonLock issue</li>
                                        <li>Improved broadcast error handling</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Version 1.3.0 -->
                        <div class="changelog-version">
                            <div class="changelog-header">
                                <div class="changelog-version-badge">v1.3.0</div>
                                <span class="changelog-date">Oct 2024</span>
                            </div>
                            <div class="changelog-content">
                                <div class="changelog-section">
                                    <div class="changelog-section-title">‚ú® New Features</div>
                                    <ul class="changelog-list">
                                        <li><strong>Schedule Names:</strong> Beri nama schedule untuk identifikasi</li>
                                        <li><strong>Search Schedules:</strong> Cari berdasarkan nama atau pesan</li>
                                        <li><strong>Archive System:</strong> Schedule terkirim pindah ke Archive</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Version 1.2.0 -->
                        <div class="changelog-version">
                            <div class="changelog-header">
                                <div class="changelog-version-badge">v1.2.0</div>
                                <span class="changelog-date">Sep 2024</span>
                            </div>
                            <div class="changelog-content">
                                <div class="changelog-section">
                                    <div class="changelog-section-title">‚ú® New Features</div>
                                    <ul class="changelog-list">
                                        <li><strong>Multi-User Support:</strong> Setiap user data terpisah</li>
                                        <li><strong>JWT Authentication:</strong> Login aman dengan token</li>
                                        <li><strong>User Dashboard:</strong> Panel kelola subscription</li>
                                    </ul>
                                </div>
                                <div class="changelog-section">
                                    <div class="changelog-section-title">üîß Improvements</div>
                                    <ul class="changelog-list">
                                        <li>Database migrasi ke SQLite</li>
                                        <li>Session management lebih stabil</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Version 1.1.0 -->
                        <div class="changelog-version">
                            <div class="changelog-header">
                                <div class="changelog-version-badge">v1.1.0</div>
                                <span class="changelog-date">Aug 2024</span>
                            </div>
                            <div class="changelog-content">
                                <div class="changelog-section">
                                    <div class="changelog-section-title">‚ú® New Features</div>
                                    <ul class="changelog-list">
                                        <li><strong>Quick Actions:</strong> Shortcut broadcast cepat</li>
                                        <li><strong>Media Library:</strong> Upload & manage gambar</li>
                                        <li><strong>Templates:</strong> Simpan message template</li>
                                        <li><strong>Commands:</strong> Custom !commands</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Version 1.0.0 -->
                        <div class="changelog-version">
                            <div class="changelog-header">
                                <div class="changelog-version-badge">v1.0.0</div>
                                <span class="changelog-date">Jul 2024</span>
                            </div>
                            <div class="changelog-content">
                                <div class="changelog-section">
                                    <div class="changelog-section-title">üéä Initial Release</div>
                                    <ul class="changelog-list">
                                        <li>Group broadcast dengan anti-ban queue</li>
                                        <li>Auto Reply dengan multiple match types</li>
                                        <li>Schedule broadcast recurring</li>
                                        <li>Statistics & history tracking</li>
                                        <li>Blacklist management</li>
                                        <li>Dark mode support</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
        <!-- All Modals -->
        <div class="modal hidden" id="addGroupModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Add Group Manually</h3>
                    <button class="modal-close" onclick="closeModal('addGroupModal')">√ó</button>
                </div>
                <div class="form-group">
                    <label class="form-label">Group Name</label>
                    <input type="text" class="form-input" id="groupNameInput" placeholder="My Group">
                </div>
                <div class="form-group">
                    <label class="form-label">Group ID</label>
                    <input type="text" class="form-input" id="groupIdInput" placeholder="6281234567890-1234567890@g.us">
                </div>
                <div class="info-box"
                    style="background:#f0f9ff; border:1px solid #bae6fd; border-radius:8px; padding:12px; margin-bottom:16px;">
                    <p style="font-weight:600; color:#0369a1; margin-bottom:8px;">üìã How to get Group ID:</p>
                    <ol style="font-size:13px; color:#0c4a6e; padding-left:20px; margin:0;">
                        <li style="margin-bottom:4px;">Open WhatsApp Web on your browser</li>
                        <li style="margin-bottom:4px;">Open the group chat you want to add</li>
                        <li style="margin-bottom:4px;">Click the group name at top ‚Üí Scroll down</li>
                        <li style="margin-bottom:4px;">Look for the group link or use our <strong>Discover
                                Groups</strong> button</li>
                    </ol>
                    <p style="font-size:12px; color:#64748b; margin-top:8px; margin-bottom:0;">
                        üí° Tip: Use "Sync Groups" to auto-import all your groups
                    </p>
                </div>
                <button class="btn btn-primary btn-block" onclick="saveGroup()">Save Group</button>
            </div>
        </div>

        <div class="modal hidden" id="addContactModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Add Contact</h3>
                    <button class="modal-close" onclick="closeModal('addContactModal')">√ó</button>
                </div>
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-input" id="contactName" placeholder="John Doe">
                </div>
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="text" class="form-input" id="contactNumber" placeholder="628123456789">
                </div>
                <button class="btn btn-primary btn-block" onclick="saveContact()">Save Contact</button>
            </div>
        </div>

        <div class="modal hidden" id="addReplyModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Add Auto Reply</h3>
                    <button class="modal-close" onclick="closeModal('addReplyModal')">√ó</button>
                </div>
                <div class="form-group">
                    <label class="form-label">Keyword</label>
                    <input type="text" class="form-input" id="replyKeyword" placeholder="e.g., info, help">
                </div>
                <div class="form-group">
                    <label class="form-label">Match Type</label>
                    <select class="form-input" id="replyMatchType">
                        <option value="contains">Contains (phrase in order)</option>
                        <option value="exact">Exact Match</option>
                        <option value="startswith">Starts With</option>
                        <option value="words">All Words (any order)</option>
                        <option value="anyword">Any Word (at least one)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Response</label>
                    <textarea class="form-input" id="replyResponse" placeholder="Your automatic response..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Image (optional)</label>
                    <div class="upload-area" onclick="document.getElementById('replyImageInput').click()">
                        <input type="file" id="replyImageInput" accept="image/*" style="display:none"
                            onchange="previewReplyImage(event)">
                        <span id="replyUploadText">üì∑ Click to add image</span>
                    </div>
                    <img id="replyImagePreview" class="image-preview hidden">
                </div>
                <button class="btn btn-primary btn-block" onclick="saveAutoReply()">Save Auto Reply</button>
            </div>
        </div>

        <div class="modal hidden" id="addScheduleModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Schedule Broadcast</h3>
                    <button class="modal-close" onclick="closeModal('addScheduleModal')">√ó</button>
                </div>
                <div class="form-group">
                    <label class="form-label">Schedule Name</label>
                    <input type="text" class="form-input" id="scheduleName"
                        placeholder="e.g., Morning Greeting, Weekly Promo">
                </div>
                <div class="form-group">
                    <label class="form-label">Select Groups</label>
                    <div class="schedule-groups-container"
                        style="max-height: 150px; overflow-y: auto; border: 1px solid var(--border); border-radius: 8px; padding: 8px; background: var(--bg);">
                        <label class="checkbox-row"
                            style="padding: 8px; border-bottom: 1px solid var(--border); margin-bottom: 4px;">
                            <input type="checkbox" id="scheduleSelectAll" onchange="toggleScheduleSelectAll()">
                            <span style="font-weight: 600; color: var(--text);">Select All</span>
                        </label>
                        <div id="scheduleGroupList"></div>
                    </div>
                    <small class="text-muted" id="scheduleSelectedCount">0 groups selected</small>
                </div>
                <div class="form-group">
                    <label class="form-label">Message</label>
                    <textarea class="form-input" id="scheduleMessage"
                        placeholder="Your scheduled message..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Image (optional)</label>
                    <div class="upload-area" onclick="document.getElementById('scheduleImageInput').click()">
                        <input type="file" id="scheduleImageInput" accept="image/*" style="display:none"
                            onchange="previewScheduleImage(event)">
                        <span id="scheduleUploadText">üì∑ Click to add image</span>
                    </div>
                    <img id="scheduleImagePreview" class="image-preview hidden">
                </div>
                <div class="form-group">
                    <label class="form-label">Date & Time</label>
                    <input type="datetime-local" class="form-input" id="scheduleTime">
                </div>
                <div class="form-group">
                    <label class="form-label">Repeat</label>
                    <select class="form-input" id="scheduleRepeat">
                        <option value="">One time only</option>
                        <option value="daily">Every day</option>
                        <option value="weekly">Every week</option>
                        <option value="monthly">Every month</option>
                    </select>
                </div>
                <button class="btn btn-primary btn-block" onclick="saveSchedule()">Schedule</button>
            </div>
        </div>

        <div class="modal hidden" id="addTemplateModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Save Template</h3>
                    <button class="modal-close" onclick="closeModal('addTemplateModal')">√ó</button>
                </div>
                <div class="form-group">
                    <label class="form-label">Template Name</label>
                    <input type="text" class="form-input" id="templateName" placeholder="e.g., Job Vacancy">
                </div>
                <div class="form-group">
                    <label class="form-label">Message</label>
                    <textarea class="form-input" id="templateMessage" rows="6"
                        placeholder="Your template message..."></textarea>
                </div>
                <p class="form-hint mb-4">Variables: {date}, {time}, {day}, {month}, {year}</p>
                <button class="btn btn-primary btn-block" onclick="saveTemplate()">Save Template</button>
            </div>
        </div>

        <div class="modal hidden" id="addCommandModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Add Command</h3>
                    <button class="modal-close" onclick="closeModal('addCommandModal')">√ó</button>
                </div>
                <div class="form-group">
                    <label class="form-label">Command</label>
                    <input type="text" class="form-input" id="commandName" placeholder="!help">
                    <p class="form-hint">Must start with !</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Response</label>
                    <textarea class="form-input" id="commandResponse"
                        placeholder="Response when command is called..."></textarea>
                </div>
                <button class="btn btn-primary btn-block" onclick="saveCommand()">Save Command</button>
            </div>
        </div>

        <div class="modal hidden" id="discoverModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Discovered Groups</h3>
                    <button class="modal-close" onclick="closeModal('discoverModal')">√ó</button>
                </div>
                <div id="discoveredList">
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal hidden" id="logsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Message Logs</h3>
                    <button class="modal-close" onclick="closeModal('logsModal')">√ó</button>
                </div>
                <div id="logsContent" style="max-height: 400px; overflow-y: auto;">
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
                <button class="btn btn-danger btn-block mt-4" onclick="clearMessageLogs()">üóëÔ∏è Clear All Logs</button>
            </div>
        </div>

        <div class="modal hidden" id="loginModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">üîê Login Required</h3>
                </div>
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-input" id="loginUsername" placeholder="admin">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button class="btn btn-primary btn-block" onclick="login()">Login</button>
            </div>
        </div>

        <div class="modal hidden" id="blacklistModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Blocked Numbers</h3>
                    <button class="modal-close" onclick="closeModal('blacklistModal')">√ó</button>
                </div>
                <div id="blacklistContent" style="max-height: 400px; overflow-y: auto;">
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal hidden" id="templateSelectModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Select Template</h3>
                    <button class="modal-close" onclick="closeModal('templateSelectModal')">√ó</button>
                </div>
                <div id="templateSelectList" style="max-height: 400px; overflow-y: auto;">
                    <div class="empty-state">
                        <p class="text-muted">No templates saved yet</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal hidden" id="membersModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Group Members</h3>
                    <button class="modal-close" onclick="closeModal('membersModal')">√ó</button>
                </div>
                <div id="membersList" style="max-height: 400px; overflow-y: auto;">
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal hidden" id="addQuickActionModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Add Quick Action</h3>
                    <button class="modal-close" onclick="closeModal('addQuickActionModal')">√ó</button>
                </div>
                <div class="form-group">
                    <label class="form-label">Action Name</label>
                    <input type="text" class="form-input" id="quickActionName" placeholder="e.g., Morning Greeting">
                </div>
                <div class="form-group">
                    <label class="form-label">Icon (emoji)</label>
                    <input type="text" class="form-input" id="quickActionIcon" placeholder="‚ö°" maxlength="2">
                </div>
                <div class="form-group">
                    <label class="form-label">Message</label>
                    <textarea class="form-input" id="quickActionMessage" rows="4"
                        placeholder="Message to send..."></textarea>
                </div>
                <p class="form-hint mb-4">Uses groups selected in Broadcast tab</p>
                <button class="btn btn-primary btn-block" onclick="saveQuickAction()">Save Quick Action</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal hidden" id="confirmModal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3 class="modal-title">Confirm</h3>
            </div>
            <p id="confirmMessage" style="margin-bottom: 20px; color: var(--text-secondary);"></p>
            <div class="btn-row">
                <button class="btn btn-secondary" id="confirmNo">Cancel</button>
                <button class="btn btn-danger" id="confirmYes">Delete</button>
            </div>
        </div>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="bottom-nav-items">
            <button class="bottom-nav-item active" onclick="switchTab('dashboard')" data-tab="dashboard">
                <span class="bottom-nav-icon">üè†</span>
                <span>Home</span>
            </button>
            <button class="bottom-nav-item" onclick="switchTab('broadcast')" data-tab="broadcast">
                <span class="bottom-nav-icon">üì¢</span>
                <span>Broadcast</span>
            </button>
            <button class="bottom-nav-item" onclick="switchTab('groups')" data-tab="groups">
                <span class="bottom-nav-icon">üë•</span>
                <span>Groups</span>
            </button>
            <button class="bottom-nav-item" onclick="switchTab('auto')" data-tab="auto">
                <span class="bottom-nav-icon">ü§ñ</span>
                <span>Auto</span>
            </button>
            <button class="bottom-nav-item" onclick="toggleMobileMenu()">
                <span class="bottom-nav-icon">‚ò∞</span>
                <span>More</span>
            </button>
        </div>
    </nav>

    <!-- Offline Indicator -->
    <div id="offlineIndicator" class="offline-indicator hidden">
        <span>üì° You are offline</span>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="script.js"></script>
</body>

</html>